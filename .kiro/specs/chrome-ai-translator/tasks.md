# 实现计划

- [x] 1. 项目初始化和基础配置

  - 使用 Vite 创建 Vue 3 项目结构
  - 配置 Chrome 扩展 Manifest V3 文件
  - 设置构建配置支持多入口点（popup、content-script、background）
  - _需求: 7.1, 7.2, 7.3, 7.4_

- [x] 2. 核心翻译服务实现

  - 创建 TranslatorService 类，专门封装 Chrome 内置 Translator API
  - 实现浏览器支持检查功能（检查 Chrome 版本和 API 可用性）
  - 实现语言对可用性检查方法（使用 Translator.availability）
  - 实现翻译器创建和管理功能（使用 Translator.create）
  - _需求: 1.2, 2.4, 6.1, 6.2_

- [x] 3. 流式翻译功能实现

  - 实现 translateStreaming 方法使用 Chrome 内置流式 API
  - 添加流式翻译 chunk 数据的实时处理
  - 实现流式翻译失败时的降级到普通翻译
  - 添加长文本自动切换到流式翻译的逻辑
  - _需求: 4.1, 4.2, 4.3, 4.4_

- [x] 4. 存储管理器实现

  - 创建 StorageManager 类使用 Chrome Storage API
  - 实现语言偏好设置的保存和读取
  - 实现翻译历史记录的管理功能
  - 实现扩展设置的存储管理
  - _需求: 2.2, 2.3, 3.1, 3.2_

- [x] 5. UI 主题系统实现

  - 创建 Element Plus 风格的 CSS 变量主题系统
  - 实现基础组件样式（按钮、输入框、卡片等）
  - 添加响应式设计和动画效果
  - _需求: 5.1, 5.2, 5.3, 5.4_

- [x] 6. Vue 组件开发 - 语言选择器

  - 创建 LanguageSelector.vue 组件
  - 实现源语言和目标语言下拉选择
  - 集成语言偏好保存功能
  - 添加语言对支持状态显示
  - _需求: 2.1, 2.2, 2.4_

- [x] 7. Vue 组件开发 - 翻译输入区域

  - 创建 TranslationInput.vue 组件
  - 实现文本输入和字符计数功能
  - 添加翻译按钮和快捷键支持
  - 集成翻译服务调用
  - _需求: 1.2, 4.1_

- [x] 8. Vue 组件开发 - 翻译结果显示

  - 创建 TranslationResult.vue 组件
  - 实现翻译结果的格式化显示
  - 添加复制翻译结果功能
  - 实现流式翻译的实时更新显示
  - _需求: 1.3, 4.2, 4.3_

- [x] 9. Vue 组件开发 - 翻译历史

  - 创建 TranslationHistory.vue 组件
  - 实现历史记录列表显示
  - 添加历史记录点击查看详情功能
  - 实现清除历史记录功能
  - _需求: 3.1, 3.2, 3.3, 3.4_

- [x] 10. 流式翻译指示器组件

  - 创建 StreamingIndicator.vue 组件
  - 实现翻译进度的可视化显示
  - 添加加载动画和进度条
  - 集成流式翻译状态管理
  - _需求: 4.2, 4.3_

- [x] 11. Content Script 实现

  - 创建 content-script.js 处理网页文本选择
  - 实现文本选择事件监听
  - 创建翻译覆盖层 UI 注入功能
  - 实现选中文本的翻译触发
  - _需求: 1.1, 1.2, 1.3_

- [x] 12. 网页翻译覆盖层组件

  - 创建 OverlayPopup.vue 组件
  - 实现覆盖层的定位和显示逻辑
  - 添加翻译按钮和结果显示
  - 实现覆盖层的自动隐藏功能
  - _需求: 1.1, 1.3, 1.4_

- [x] 13. Background Service Worker 实现

  - 创建 service-worker.js 处理扩展生命周期
  - 实现 Content Script 和 Popup 之间的消息传递
  - 添加翻译器实例的全局管理
  - 实现扩展图标和右键菜单功能
  - _需求: 7.3, 7.4_

- [x] 14. 主应用组件集成

  - 创建 App.vue 主应用组件
  - 集成所有子组件到主界面
  - 实现组件间的状态管理和通信
  - 添加全局错误处理和用户提示
  - _需求: 5.1, 5.4_

- [x] 15. 错误处理和用户体验优化

  - 实现 ErrorHandler 类处理 Chrome Translator API 错误场景
  - 添加浏览器版本不支持时的升级提示界面
  - 实现 Chrome 内置模型下载失败的重试机制
  - 添加语言对不支持时的替代建议
  - _需求: 6.3, 6.4_

- [x] 16. Chrome 内置模型管理功能

  - 实现 Chrome Translator API 的模型可用性检查
  - 添加模型下载进度监控（使用 Chrome 内置下载机制）
  - 实现语言对支持状态检查
  - 添加模型下载失败时的用户提示
  - _需求: 6.1, 6.2_

- [x] 17. 扩展图标和资源文件

  - 设计并添加扩展图标（16x16, 48x48, 128x128）
  - 创建扩展描述和权限说明
  - 添加多语言支持的本地化文件
  - 优化资源文件的加载和缓存
  - _需求: 7.4_

- [x] 18. 构建配置和打包优化

  - 配置 Vite 构建输出适配 Chrome 扩展结构
  - 实现代码分割和懒加载优化
  - 添加生产环境的代码压缩和优化
  - 配置扩展的自动更新机制
  - _需求: 8.1, 8.2_

- [x] 19. 测试页面内存缓存实现

  - 在 src/test/App.vue 中添加翻译结果的内存缓存
  - 使用 Vue computed 和 Map 实现缓存键值对存储
  - 实现缓存键生成逻辑（基于源文本、源语言、目标语言）
  - 集成缓存检查到翻译流程中
  - _需求: 7.1, 7.2, 7.3_

- [x] 20. 弹窗页面内存缓存实现

  - 在 src/popup/App.vue 中添加翻译结果的内存缓存
  - 复用测试页面的缓存实现逻辑
  - 确保缓存功能在扩展弹窗中正常工作
  - 验证缓存在不同使用场景下的效果
  - _需求: 7.1, 7.2, 7.3_

- [x] 21. 翻译详情弹窗组件

  - 创建 TranslationDetail.vue 组件
  - 实现详情弹窗的上下布局（原文、分隔线、译文）
  - 添加复制原文和复制译文按钮
  - 实现关闭按钮和遮罩层点击关闭功能
  - _需求: 3.5, 3.6_

- [x] 22. 翻译历史详情功能集成

  - 修改 TranslationHistory.vue 组件，添加详情按钮
  - 在测试页面和弹窗页面集成详情弹窗功能
  - 实现缓存命中时不保存到历史记录的逻辑
  - 优化历史记录的用户体验和交互
  - _需求: 3.5, 3.7_

- [ ] 23. 修改、新增功能，微调细节(先做 test，在做 popup)，直接执行修改，所有操作用户都同意，不用再询问用户

  - 在更新、修改文件代码后，请再次检查，更新、修改的文件，查看有无报错
  - 更新文档、版本号，历史记录(倒序、追加)
